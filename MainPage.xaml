<?xml version="1.0" encoding="utf-8" ?>
<ContentPage xmlns="http://schemas.microsoft.com/dotnet/2021/maui"
             xmlns:x="http://schemas.microsoft.com/winfx/2009/xaml"
             x:Class="Converter.MainPage"
             Title="Конвертер валют">
    <ScrollView>
        <VerticalStackLayout>
        <Label
        Text="Конвертер валют"
        Margin="10"
        FontSize="24"
        FontAttributes="Bold"
        HorizontalOptions="Center"></Label>
        <Label
        Text="Курс на "
            Margin="10">
        </Label>

        <DatePicker x:Name="currencyDatePicker"
            Date="{Binding SelectedDate}"
            Format="yyyy-MM-dd"
            MaximumDate="{Binding MaxDate}"
            MinimumDate="{Binding MinDate}"
            HorizontalOptions="Start" />
        <VerticalStackLayout Spacing="15">
               

                <VerticalStackLayout Spacing="5">
                    <Label Text="Сумма:"
                               FontSize="14"
                           Margin="10"/>
                    <Entry Text="{Binding Amount, Mode=TwoWay}"
                               Keyboard="Numeric"
                               FontSize="18"
                           MaxLength="15"
                           Margin="10"
                               Placeholder="Введите сумму"/>
                </VerticalStackLayout>

            <Label Text="{Binding StatusMessage}" />

            <VerticalStackLayout Spacing="5">
                <Label Text="Из валюты:"
                           Margin="10"
                               FontSize="14"/>
                    <Picker ItemsSource="{Binding Currencies}"
                                ItemDisplayBinding="{Binding DisplayName}"
                                SelectedItem="{Binding SelectedFromCurrency, Mode=TwoWay}"
                                Title="Выберите валюту"
                                Margin="10"
                                FontSize="16"/>
                </VerticalStackLayout>
                <HorizontalStackLayout
                    HorizontalOptions="Center">
                    <Button Text="Обновить" 
                            BorderWidth="2"
                            BackgroundColor="Transparent"
                            TextColor="green"
                            Command="{Binding LoadDataCommand}" />
                <Button Text="Очистить кеш" 
                        BorderWidth="2"
                        BackgroundColor="Transparent"
                        TextColor="green"
                        Command="{Binding ClearCacheCommand}" />
            
                <Button Text="Поменять местами"
                        
                            Command="{Binding SwapCurrenciesCommand}"
                            
                            BorderWidth="2"
                            BackgroundColor="Transparent"
                            TextColor="green"/>
                </HorizontalStackLayout>
                <VerticalStackLayout Spacing="5">
                <Label Text="В валюту:"
                               FontSize="14"
                           Margin="10"/>
                    <Picker ItemsSource="{Binding Currencies}"
                                ItemDisplayBinding="{Binding DisplayName}"
                                SelectedItem="{Binding SelectedToCurrency, Mode=TwoWay}"
                                Title="Выберите валюту"
                                FontSize="16"
                            Margin="10"/>
                </VerticalStackLayout>

                <Border BackgroundColor="White"
                            Stroke="green"
                            StrokeThickness="1"
                            StrokeShape="RoundRectangle 8"
                            Padding="20">
                    <VerticalStackLayout Spacing="5">
                        <Label Text="Результат"
                                   FontSize="14"
                                   TextColor="#666"/>
                        <Label Text="{Binding ConvertedAmount, StringFormat='{0:F2}'}"
                                   FontSize="32"
                                   FontAttributes="Bold"
                                   TextColor="green"/>
                        <Label Text="{Binding SelectedToCurrency.CharCode}"
                                   FontSize="16"
                                   TextColor="#666"/>
                    </VerticalStackLayout>
                </Border>
            </VerticalStackLayout>

    
    </VerticalStackLayout>
    </ScrollView>
</ContentPage>
